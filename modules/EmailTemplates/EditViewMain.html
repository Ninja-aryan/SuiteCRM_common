<!--
/**
 *
 * SugarCRM Community Edition is a customer relationship management program developed by
 * SugarCRM, Inc. Copyright (C) 2004-2013 SugarCRM Inc.
 *
 * SuiteCRM is an extension to SugarCRM Community Edition developed by SalesAgility Ltd.
 * Copyright (C) 2011 - 2018 SalesAgility Ltd.
 *
 * This program is free software; you can redistribute it and/or modify it under
 * the terms of the GNU Affero General Public License version 3 as published by the
 * Free Software Foundation with the addition of the following permission added
 * to Section 15 as permitted in Section 7(a): FOR ANY PART OF THE COVERED WORK
 * IN WHICH THE COPYRIGHT IS OWNED BY SUGARCRM, SUGARCRM DISCLAIMS THE WARRANTY
 * OF NON INFRINGEMENT OF THIRD PARTY RIGHTS.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
 * details.
 *
 * You should have received a copy of the GNU Affero General Public License along with
 * this program; if not, see http://www.gnu.org/licenses or write to the Free
 * Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
 * 02110-1301 USA.
 *
 * You can contact SugarCRM, Inc. headquarters at 10050 North Wolfe Road,
 * SW2-130, Cupertino, CA 95014, USA. or at email address contact@sugarcrm.com.
 *
 * The interactive user interfaces in modified source and object code versions
 * of this program must display Appropriate Legal Notices, as required under
 * Section 5 of the GNU Affero General Public License version 3.
 *
 * In accordance with Section 7(b) of the GNU Affero General Public License version 3,
 * these Appropriate Legal Notices must retain the display of the "Powered by
 * SugarCRM" logo and "Supercharged by SuiteCRM" logo. If the display of the logos is not
 * reasonably feasible for technical reasons, the Appropriate Legal Notices must
 * display the words "Powered by SugarCRM" and "Supercharged by SuiteCRM".
 */

/**

 */
-->
<!-- BEGIN: main -->
<style>
    #subjectfield {
        height: 27px;
    }
</style>
{JAVASCRIPT}
<script language="Javascript" src="modules/Emails/javascript/Email.js?v={VERSION_MARK}" type="text/javascript"></script>
<script language="Javascript" src="modules/EmailTemplates/EmailTemplate.js?v={VERSION_MARK}"
        type="text/javascript"></script>
<script src="cache/include/javascript/sugar_grp1.js?v={VERSION_MARK}" type="text/javascript"></script>
<script type="text/javascript">
    {
        FIELD_DEFS_JS
    }
</script>
{JSLANG}

<form action="index.php" enctype="multipart/form-data" id="EditView" method="POST" name="EditView">
    <input name="module" type="hidden" value="EmailTemplates">
    <input name="record" type="hidden" value="{ID}">
    <input name="action" type="hidden">
    <input name="form" type="hidden">
    <input name="return_module" type="hidden" value="{RETURN_MODULE}">
    <input name="return_id" type="hidden" value="{RETURN_ID}">
    <input name="return_action" type="hidden" value="{RETURN_ACTION}">
    <input name="inpopupwindow" type="hidden" value="{INPOPUPWINDOW}">
    <input name="old_id" type="hidden" value="{OLD_ID}">

    <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td>
                <input accesskey="{APP.LBL_SAVE_BUTTON_KEY}" class="button primary" id="SAVE"
                       name="button"
                       onclick="	this.form.action.value='Save';
<!-- BEGIN: NoInbound1 -->
								addUploadFiles('EditView');
								addUploadDocs('EditView');
<!-- END: NoInbound1 -->
								return check_form('EditView');" title="{APP.LBL_SAVE_BUTTON_TITLE}" type="submit" value="{APP.LBL_SAVE_BUTTON_LABEL}">
                <input accesskey="{APP.LBL_CANCEL_BUTTON_KEY}" class="button" id="CANCEL"
                       name="button" onclick="{CANCEL_SCRIPT}" title="{APP.LBL_CANCEL_BUTTON_TITLE}" type="submit"
                       value="{APP.LBL_CANCEL_BUTTON_LABEL}">
            </td>
            <td align="right" nowrap>
				<span class="required">
					{APP.LBL_REQUIRED_SYMBOL}
				</span>
                {APP.NTC_REQUIRED}
            </td>
            <td align='right'>
                {ADMIN_EDIT}
            </td>
        </tr>
    </table>
    <table border="0" cellpadding="0" cellspacing="0" class="edit view" width="100%">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td scope="row" width="15%">
                            {MOD.LBL_NAME}
                            <span class="required">
								{APP.LBL_REQUIRED_SYMBOL}
							</span>
                        </td>
                        <td width="30%">
                            <input id='name' maxlength="255" name='name' size='30' tabindex="0" type="text"
                                   value="{NAME}">
                        </td>
                        <td scope="row" width="15%">
                            {MOD.LBL_TYPE}
                        </td>
                        <td width="30%">
                            <select name='type' tabindex="11">{TYPEDROPDOWN}</select>
                        </td>
                    </tr>
                    <tr>
                        <td scope="row" width="15%">
                            {MOD.LBL_DESCRIPTION}
                        </td>
                        <td colspan="1">
                            <textarea cols="90" id="description" name='description' rows="4"
                                      style="overflow-y:auto; font-family:sans-serif,monospace; font-size:inherit;"
                                      tabindex='0'>{DESCRIPTION}</textarea>
                        </td>
                        <td scope="row" width="15%">{APP.LBL_ASSIGNED_TO}&nbsp;</td>
                        <td>
                            <input autocomplete="off" class="sqsEnabled" id='assigned_user_name' name='assigned_user_name'
                                   tabindex="0" type="text" value="{ASSIGNED_USER_NAME}">
                            <input id='assigned_user_id' name='assigned_user_id' type="hidden"
                                   value="{ASSIGNED_USER_ID}"/>

                            <span class="id-ff multiple">
		                      <button class="button firstChild" id="btn_author" name="btn_author"
                                      onclick='open_popup("Users", 600, 400, "", true, false, {encoded_assigned_users_popup_request_data});' tabindex='0' title="{APP.LBL_SELECT_BUTTON_TITLE}"
                                      type="button"
                                      value='{APP.LBL_SELECT_BUTTON_LABEL}'>{assign_user_select}</button><button
                                    class="button lastChild" id="btn_clr" name="btn_clr" onclick="this.form.assigned_user_name.value = ''; this.form.assigned_user_id.value = '';"
                                    tabindex="0" title="{APP.LBL_CLEAR_BUTTON_TITLE}"
                                    type="button"
                                    value="{APP.LBL_CLEAR_BUTTON_LABEL}">{assign_user_clear}</button>
		                 </span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            &nbsp;
                        </td>
                    </tr>
                    <!-- BEGIN: NoInbound -->
                    <tr>
                        <td align='left' scope="row" width="15%">
                            {MOD.LBL_INSERT_VARIABLE}&nbsp;
                        </td>
                        <td colspan="3" width="30%">
                            <select name='variable_module' onchange="addVariables(document.EditView.variable_name,this.options[this.selectedIndex].value);"
                                    tabindex="0">
                                {DROPDOWN}
                            </select>
                            <select name='variable_name' onchange="showVariable();" tabindex="0">
                            </select>
                            <span scope="row">
								{MOD.LBL_USE}:
							</span>
                            <input name="variable_text" size="30" tabindex="0" type="text"/>
                            <!-- BEGIN: variable_button -->
                            <input class='button' id="insert_variable_to_body_btn" onclick='{INSERT_VARIABLE_ONCLICK}'
                                   style="display: none;" tabindex="0" type='button'
                                   value='{MOD.LBL_INSERT}'>
                            <input class='button' id="insert_variable_to_subject_btn" onclick='insert_variable(document.EditView.variable_text.value, "subjectfield", true)'
                                   tabindex="0"
                                   type='button' value='{MOD.LBL_INSERT}'>
                            <!-- END: variable_button -->
                        </td>
                    </tr>
                    <!-- BEGIN: tracker_url -->
                    <tr>
                        <td align='left' scope="row" width="15%">
                            {MOD.LBL_INSERT_TRACKER_URL}&nbsp;
                        </td>
                        <td colspan="3" valign="top" width="85%">
                            <select name='tracker_url' onchange='this.form.url_text.value=this.value' tabindex='0'>
                                {TRACKER_KEY_OPTIONS}
                            </select>
                            <input id="url_text" name="url_text" size="30" type="text" value="{DEFAULT_URL_TEXT}"/>
                            <input class='button' onclick='{INSERT_URL_ONCLICK}' tabindex="0" type='button'
                                   value='{MOD.LBL_INSERT_URL_REF}'>
                        </td>
                    </tr>
                    <!-- END: tracker_url -->
                    <!-- END: NoInbound -->
                    <tr>
                        <td scope="row" width="15%">
                            {MOD.LBL_SUBJECT}
                        </td>
                        <td colspan='4'>
                            <input id="subjectfield" name='subject' onblur="remember_place(this);"
                                   onclick="onClickTemplateSubject(this);"
                                   style="width: 80%; overflow-y:auto; font-family:sans-serif,monospace; font-size:inherit;"
                                   tabindex='0' value="{SUBJECT}">
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td colspan='4'>
                            <input id="toggle_textonly" name="toggle_textonly" onclick="toggle_text_only();"
                                   type="checkbox" {TEXTONLY_CHECKED}/>
                            <input id="text_only" name="text_only" type="hidden" value='{TEXTONLY_VALUE}'/>
                            &nbsp;{MOD.LBL_SEND_AS_TEXT}
                        </td>
                    </tr>
                    <tr {width_style}>
                        <td scope="row" width="15%">
                            {MOD.LBL_WIDTH}
                        </td>
                        <td>
                            <div class="panel-toolbar">
                                <div class="template-container">
                                    <input class="form-control input-sm" id="mozaik_width_set" onkeyup="mozaik.setWidth(parseInt(this.value)+'px');"
                                           onmouseup="mozaik.setWidth(parseInt(this.value)+'px'); "
                                           type="number"
                                           value="{template_width}">
                                </div>
                            </div>
                        </td>
                    <tr>
                    <tr>
                        <td scope="row" valign="top">
                            {MOD.LBL_BODY}
                        </td>

                        <!-- BEGIN: textarea -->
                        <td colspan="4">
                            <div id='body_text_div'>
                                {BODY_EDITOR}
                                <textarea cols="100" id='body_text' name='body_html' rows="25" style="display: none;"
                                          tabindex='0'>{BODY_HTML}</textarea>
                            </div>
                            <div id='toggle_textarea_option'>
                                <input id='toggle_textarea_elem' name="toggle_html" onclick="toggle_textarea_edit(this);"
                                       type="button" value="{MOD.LBL_EDIT_ALT_TEXT}"/>
                            </div>
                            <div id="text_div" style="display: none">
                                <textarea cols="100" id='body_text_plain' name='body' rows="25" style="width:100%"
                                          tabindex='0'>{BODY}</textarea>
                            </div>
                        </td>
                        <!-- END: textarea -->
                    </tr>
                    <!-- BEGIN: NoInbound2 -->
                    <tr>
                        <td scope="row" valign="top">
                            {MOD.LBL_ATTACHMENTS}:
                        </td>
                        <td colspan="2" nowrap>
                            {ATTACHMENTS_JAVASCRIPT} {ATTACHMENTS}
                        </td>
                    </tr>
                    <!-- END: NoInbound2 -->
                </table>
            </td>
        </tr>
    </table>
</form>
<!-- BEGIN: NoInbound3 -->
<form action='AttachDocuments.php' enctype="multipart/form-data" id="upload_form" method="POST" name="upload_form">
    <div id="upload_div">
        <input class="button" id="add_doc" name="add_doc" onclick="selectDoc();" type="button"
               value='{MOD.LBL_SUITE_DOCUMENT}'/>
        <label class="button">
            <input id="my_file" name="file_1" size="40" style="display: none" type="file"/>
            {MOD.LBL_UPLOAD_FILE}
        </label>
        <input id="documentName" name="uploaddoc" onchange="docUpload(); form_reset_doc();" size="1" type="hidden"/>
        <input id="documentId" name="seldoc" tabindex="0" type="hidden"/>
        <input id="docRevId" name="seldoc" tabindex="0" type="hidden"/>
        <input id="documentType" name="seldoc" tabindex="0" type="hidden"/>
    </div>
    <div id="attachments_div">
    </div>
</form>
<!-- END: NoInbound3 -->

<script language="javascript" type="text/javascript">
    <!--
    BEGIN: NoInbound4 -->
    toggle_textarea_elem_values = ['{MOD.LBL_EDIT_ALT_TEXT}', '{MOD.LBL_HIDE_ALT_TEXT}'];
    var multi_selector = new multiFiles(document.getElementById('upload_div'));
    multi_selector.addElement(document.getElementById('my_file'));
    <!-- END: NoInbound4 -->
    //call the function on load, this will hide the tinyMCE editor if needed
    toggle_text_only(true);

    function toggle_portal_flag() {
        {
            TOGGLE_JS
        }
    }

    <!-- BEGIN: NoInbound5 -->
    addVariables(document.EditView.variable_name, '{DEFAULT_MODULE}');
    <!-- END: NoInbound5 -->
    focus_obj = document.EditView.body;
    toggle_portal_flag();
    update_textarea_button();
</script>


<!-- END: main -->